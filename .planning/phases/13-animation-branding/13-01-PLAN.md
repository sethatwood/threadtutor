---
phase: 13-animation-branding
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/globals.css
  - components/concept-node.tsx
  - components/app-header.tsx
autonomous: true

must_haves:
  truths:
    - "When a new concept appears on the map, concentric rings visibly expand outward from the node with staggered timing"
    - "Rings fade from visible opacity to transparent as they expand"
    - "In dark mode, rings are light/subtle; in light mode, rings are dark/subtle"
    - "Echo-ring animation plays only on new nodes (isNew=true), not on existing nodes"
    - "The ThreadTutor wordmark in the header uses serif font (Libre Baskerville) rather than default styling"
  artifacts:
    - path: "app/globals.css"
      provides: "echoExpand keyframe, echo-ring styles, --color-echo-ring variables in both theme palettes"
      contains: "@keyframes echoExpand"
    - path: "components/concept-node.tsx"
      provides: "Echo-ring overlay divs rendered conditionally on isNew"
      contains: "echo-ring"
    - path: "components/app-header.tsx"
      provides: "Serif-styled ThreadTutor wordmark"
      contains: "font-serif"
  key_links:
    - from: "lib/graph-layout.ts"
      to: "components/concept-node.tsx"
      via: "isNew flag in ConceptNodeData"
      pattern: "data\\.isNew"
    - from: "app/globals.css"
      to: "components/concept-node.tsx"
      via: "echo-ring CSS class applied to divs"
      pattern: "\\.echo-ring"
    - from: "[data-theme] blocks in globals.css"
      to: ".echo-ring border-color"
      via: "--color-echo-ring CSS variable"
      pattern: "--color-echo-ring"
---

<objective>
Add concentric expanding ring animation to new concept map nodes (inspired by Bitcoin Echo's echo-ring effect) and refine the app logo/wordmark to use the serif/mono typographic identity.

Purpose: This is the final phase of the v1.1 Design Overhaul. The echo-ring animation gives concept discovery a distinctive visual signature -- new knowledge literally radiates outward. The logo refinement completes the typographic identity across the entire app.

Output: Updated globals.css with echo-ring keyframes and theme-aware ring colors, updated ConceptNode with ring overlay markup, updated AppHeader with serif wordmark.
</objective>

<execution_context>
@/Users/yayseth/.claude/get-shit-done/workflows/execute-plan.md
@/Users/yayseth/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Key source files
@app/globals.css
@components/concept-node.tsx
@components/app-header.tsx
@lib/graph-layout.ts

# Bitcoin Echo reference for echo-ring pattern
@bitcoinecho-org/index.html (lines 470-519: echo-ring CSS, lines 1305-1310: echo-ring markup)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add concentric echo-ring animation to new concept map nodes</name>
  <files>app/globals.css, components/concept-node.tsx</files>
  <action>
**CSS (app/globals.css):**

1. Add `--color-echo-ring` to both `[data-theme]` blocks:
   - Dark theme: `--color-echo-ring: rgba(255, 255, 255, 0.18);` (light rings on dark background, matching Bitcoin Echo's dark palette)
   - Light theme: `--color-echo-ring: rgba(0, 0, 0, 0.15);` (dark rings on light background, matching Bitcoin Echo's light palette)

2. Add echo-ring container and ring styles after the existing concept node styles (after `.concept-node--new` block, before the keyframes section):

```css
.echo-rings {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.echo-ring {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  border: 1.5px solid var(--color-echo-ring);
  border-radius: 12px;
  animation: echoExpand 3s ease-out forwards;
}

.echo-ring:nth-child(1) { animation-delay: 0s; }
.echo-ring:nth-child(2) { animation-delay: 0.6s; }
.echo-ring:nth-child(3) { animation-delay: 1.2s; }
```

3. Add the `@keyframes echoExpand` animation (after the existing concept-glow-fade keyframe):

```css
@keyframes echoExpand {
  0% {
    width: 100%;
    height: 100%;
    opacity: 0.7;
  }
  100% {
    width: 280%;
    height: 400%;
    opacity: 0;
  }
}
```

Key differences from Bitcoin Echo's version:
- `border-radius: 12px` instead of `50%` (concept nodes are rounded rectangles, not circles)
- `forwards` fill mode instead of `infinite` (rings play once per new node, not continuously)
- `3s` duration instead of `4s` (faster pacing for in-app micro-interaction vs hero section)
- Three rings instead of four (smaller visual footprint in the concept map panel)
- Asymmetric expansion: `width: 280%` and `height: 400%` to create a pill/oval expansion that echoes the rectangular node shape rather than a perfect circle

4. Ensure the `.concept-node` base style has `position: relative` so the absolutely-positioned echo-rings container is positioned relative to the node. Add `overflow: visible` to ensure rings expand beyond node boundaries.

**Component (components/concept-node.tsx):**

5. Inside the ConceptNode component, add echo-ring overlay divs that render only when `data.isNew` is true. Place them inside the outer div (the one with className `concept-node`), after the source Handle:

```tsx
{data.isNew && (
  <div className="echo-rings">
    <div className="echo-ring" />
    <div className="echo-ring" />
    <div className="echo-ring" />
  </div>
)}
```

The `data.isNew` flag is already computed in `lib/graph-layout.ts` (line 100: `isNew: concept.turnNumber === latestTurnNumber`), so no changes needed there.
  </action>
  <verify>
1. `npm run build` passes with zero errors
2. Run `npx tsc --noEmit` to verify TypeScript compiles
3. Visually verify: In the dev server, start a conversation. When a new concept node appears on the map, three concentric rounded-rectangle rings should expand outward from the node with staggered timing (0s, 0.6s, 1.2s delays) and fade to transparent. Existing (older) nodes should NOT show rings.
4. Toggle theme: rings should be light (rgba white) on dark background, dark (rgba black) on light background.
  </verify>
  <done>New concept map nodes display three concentric expanding rings with staggered timing that fade to transparent. Rings use theme-aware colors via --color-echo-ring CSS variable. Animation plays only on nodes with isNew=true. Build passes.</done>
</task>

<task type="auto">
  <name>Task 2: Refine logo wordmark to serif/mono typographic identity</name>
  <files>components/app-header.tsx</files>
  <action>
Update the AppHeader component to give the "ThreadTutor" wordmark a distinctive typographic treatment using the project's serif and mono fonts:

1. Change the "ThreadTutor" text span to use `font-serif` class (Libre Baskerville) instead of the default styling. The current classes are `text-sm font-bold text-[var(--color-text)] md:text-base`. Update to: `font-serif text-sm font-bold text-[var(--color-text)] md:text-base tracking-tight`.

   Adding `tracking-tight` tightens letter-spacing slightly for the serif font at small sizes, giving it a more refined wordmark feel rather than body-text spacing.

2. Change the tagline "Socratic learning with AI" to use `font-mono` class with slightly adjusted sizing. Current classes: `hidden text-xs text-[var(--color-text-dim)] md:block`. Update to: `hidden font-mono text-[0.6875rem] uppercase tracking-widest text-[var(--color-text-dim)] md:block`.

   This makes the tagline match the established label pattern (mono/uppercase/tracked) used throughout the app for mode badges, section labels, and assessment badges. The `text-[0.6875rem]` (11px) matches the existing badge font size.

Do NOT change the LogoMark SVG component -- the three-circle graph icon is already a good visual representation of the concept map and its colors (indigo/emerald) align with the accent palette.
  </action>
  <verify>
1. `npm run build` passes with zero errors
2. Visually verify: The "ThreadTutor" text in the header renders in Libre Baskerville (serif) with tight letter-spacing. The tagline "Socratic learning with AI" renders in Courier Prime (mono) as an uppercase label with wide tracking, matching the style of mode badges (REPLAY/LIVE).
3. Verify in both themes: text remains readable with appropriate contrast.
  </verify>
  <done>The ThreadTutor wordmark uses serif font (Libre Baskerville) with tracking-tight, and the tagline uses the mono/uppercase/tracked label pattern (Courier Prime). Both render correctly in dark and light themes.</done>
</task>

</tasks>

<verification>
1. `npm run build` completes with zero errors
2. New concept nodes on the map produce visible concentric expanding rings that fade out
3. Rings are staggered (three rings, 0.6s apart) and use theme-appropriate colors
4. Older/existing nodes do NOT show echo-ring animation
5. The "ThreadTutor" wordmark in the header uses serif font
6. The tagline uses the mono/uppercase/tracked label pattern
7. Both themes render all changes correctly
</verification>

<success_criteria>
- ANIM-01: Concept map nodes pulse with concentric expanding rings on appearance
- ANIM-02: Rings have staggered timing (0s, 0.6s, 1.2s), fade from 0.7 to 0 opacity, use --color-echo-ring CSS variable that adapts per theme
- BRAND-01: Logo wordmark uses Libre Baskerville serif, tagline uses Courier Prime mono label pattern
- Build passes with zero errors in both themes
</success_criteria>

<output>
After completion, create `.planning/phases/13-animation-branding/13-01-SUMMARY.md`
</output>
