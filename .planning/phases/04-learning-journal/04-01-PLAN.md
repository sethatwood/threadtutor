---
phase: 04-learning-journal
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - components/learning-journal.tsx
  - app/globals.css
  - components/conversation-shell.tsx
autonomous: true

must_haves:
  truths:
    - "Right panel displays a running list of one-sentence summaries, one per assistant turn"
    - "Journal grows progressively as conversation advances -- new entries appear after each Claude response"
    - "Empty state shows placeholder text before first assistant response"
    - "Journal scrolls to newest entry automatically"
  artifacts:
    - path: "components/learning-journal.tsx"
      provides: "LearningJournal component rendering journal entries from turns"
      exports: ["LearningJournal"]
    - path: "app/globals.css"
      provides: "journal-enter keyframe animation for entry fade-in"
      contains: "journal-enter"
    - path: "components/conversation-shell.tsx"
      provides: "Integration wiring: LearningJournal receives turns prop"
      contains: "LearningJournal"
  key_links:
    - from: "components/conversation-shell.tsx"
      to: "components/learning-journal.tsx"
      via: "import and turns={state.turns} prop"
      pattern: "<LearningJournal turns="
    - from: "components/learning-journal.tsx"
      to: "lib/types.ts"
      via: "Turn type import for prop typing"
      pattern: "import.*Turn.*from.*@/lib/types"
---

<objective>
Create the LearningJournal component and integrate it into the three-panel layout, replacing the JournalPlaceholder. The journal displays a running list of one-sentence summaries derived from assistant turns, growing progressively as the conversation advances.

Purpose: Completes the three-panel experience (ConceptMap | Conversation | Journal) by filling the right panel with meaningful learning summaries.
Output: Working LearningJournal component wired into ConversationShell, CSS entry animation.
</objective>

<execution_context>
@/Users/yayseth/.claude/get-shit-done/workflows/execute-plan.md
@/Users/yayseth/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-learning-journal/04-RESEARCH.md
@components/conversation-shell.tsx
@components/journal-placeholder.tsx
@lib/types.ts
@app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create LearningJournal component with entry animation</name>
  <files>components/learning-journal.tsx, app/globals.css</files>
  <action>
Create `components/learning-journal.tsx` with a `LearningJournal` component that:

1. Accepts `turns: Turn[]` as its single prop (import Turn from `@/lib/types`).
2. Uses `useMemo` to derive journal entries: filter turns for `role === "assistant"` AND `journalEntry !== null` (use TypeScript type narrowing), then map to `{ number: index + 1, text: t.journalEntry, turnNumber: t.turnNumber }`.
3. Shows an empty state when entries.length === 0: centered muted text "Your learning journal will appear here" matching JournalPlaceholder's styling (`flex h-full items-center justify-center`, `text-sm text-zinc-600`).
4. When entries exist, renders:
   - A sticky header: `border-b border-zinc-800 px-4 py-3` with `h2` text "Learning Journal" (`text-sm font-semibold text-zinc-300`).
   - A scrollable list container: `flex-1 overflow-y-auto px-4 py-3`.
   - An `ol` with `space-y-3` containing `li` elements for each entry. Each li has class `journal-entry text-sm text-zinc-400` with an indigo-tinted number prefix: `span` with `mr-2 text-xs font-medium text-indigo-400/60` showing `{entry.number}.` followed by `{entry.text}`.
   - Key each li by `entry.turnNumber`.
5. Auto-scrolls to newest entry using a scroll sentinel div (ref) at the bottom of the list, with `useEffect` calling `scrollRef.current?.scrollIntoView({ behavior: "smooth" })` triggered on `entries.length` change.
6. Component is wrapped in `flex h-full flex-col` container so the header stays fixed and the list scrolls.
7. Mark as `"use client"`.

Add to `app/globals.css` (after the concept node keyframes section):

```css
/* Journal entry fade-in */
.journal-entry {
  animation: journal-enter 300ms ease-out;
}

@keyframes journal-enter {
  from {
    opacity: 0;
    transform: translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
```

Do NOT delete `components/journal-placeholder.tsx` yet (Task 2 handles the swap).
  </action>
  <verify>
File `components/learning-journal.tsx` exists with LearningJournal export. File `app/globals.css` contains `journal-enter` keyframe. Run `npx tsc --noEmit` to verify no type errors.
  </verify>
  <done>LearningJournal component exists with Turn[] prop, useMemo filtering, empty state, numbered entry list, scroll sentinel, and journal-enter CSS animation.</done>
</task>

<task type="auto">
  <name>Task 2: Integrate LearningJournal into ConversationShell</name>
  <files>components/conversation-shell.tsx</files>
  <action>
In `components/conversation-shell.tsx`:

1. Replace the import `import { JournalPlaceholder } from "@/components/journal-placeholder"` with `import { LearningJournal } from "@/components/learning-journal"`.
2. In the JSX, replace `<JournalPlaceholder />` with `<LearningJournal turns={state.turns} />` inside the right panel div (`w-1/4 border-l border-zinc-800`).
3. Delete `components/journal-placeholder.tsx` since it is no longer imported anywhere.

The right panel div already provides width constraint (`w-1/4`). The LearningJournal's `h-full flex-col` will fill the available height.
  </action>
  <verify>
Run `npx tsc --noEmit` to verify no type errors and no dangling imports. Run `npm run build` to confirm production build succeeds. Grep for "JournalPlaceholder" across the codebase -- should return zero results. Grep for "LearningJournal" in conversation-shell.tsx -- should find the import and JSX usage.
  </verify>
  <done>ConversationShell renders LearningJournal with turns={state.turns}. JournalPlaceholder is deleted. Build passes with no errors.</done>
</task>

</tasks>

<verification>
1. `npm run build` succeeds with no errors
2. `npx tsc --noEmit` passes with no type errors
3. `components/learning-journal.tsx` exists and exports LearningJournal
4. `components/journal-placeholder.tsx` does not exist
5. `components/conversation-shell.tsx` imports and renders LearningJournal with turns prop
6. `app/globals.css` contains journal-enter keyframe animation
7. No references to JournalPlaceholder remain in the codebase
</verification>

<success_criteria>
The right panel of the three-panel layout renders a LearningJournal component that derives one-sentence summaries from assistant turns, displays them as a numbered scrollable list with entry animations, and grows progressively as new Claude responses arrive. The build passes cleanly.
</success_criteria>

<output>
After completion, create `.planning/phases/04-learning-journal/04-01-SUMMARY.md`
</output>
