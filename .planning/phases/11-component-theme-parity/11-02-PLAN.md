---
phase: 11-component-theme-parity
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - components/confidence-check.tsx
  - components/conversation-panel.tsx
  - components/session-list.tsx
  - app/globals.css
autonomous: true

must_haves:
  truths:
    - "Assessment badges (tracking/partial/confused) are readable with sufficient contrast in both dark and light themes"
    - "Error banner text and dismiss button are readable in both themes"
    - "Confidence check input and submit button have visible focus rings in both themes"
    - "All interactive elements across the entire app have hover/focus states that work in both themes"
    - "COMP-03 VERIFIED: Learning journal already uses only var(--color-*) variables (text-dim, text-muted, border, accent-indigo) -- no hardcoded Tailwind color classes remain"
    - "COMP-04 VERIFIED: App header already uses only var(--color-*) variables for all text, borders, badges, and toggle button -- SVG logo uses fixed brand colors (#6366f1, #a5b4fc, #818cf8, #34d399) which are intentionally theme-invariant brand marks"
    - "COMP-05 VERIFIED: Topic picker already uses only var(--color-*) variables for all text, inputs, buttons, badges, surfaces, and borders -- SVG logo same fixed brand colors as header"
  artifacts:
    - path: "components/confidence-check.tsx"
      provides: "Theme-adaptive assessment badge colors via CSS custom properties"
      contains: "color-status-success"
    - path: "components/conversation-panel.tsx"
      provides: "Theme-adaptive error banner colors via CSS custom properties"
      contains: "color-status-error"
    - path: "components/session-list.tsx"
      provides: "Theme-adaptive delete button hover state"
      contains: "color-status-error"
    - path: "app/globals.css"
      provides: "Status color CSS custom properties in both theme palettes"
      contains: "color-status-success"
  key_links:
    - from: "components/confidence-check.tsx"
      to: "app/globals.css"
      via: "CSS custom properties for assessment text colors"
      pattern: "color-status-(success|warning|error)"
    - from: "components/conversation-panel.tsx"
      to: "app/globals.css"
      via: "CSS custom properties for error banner styling"
      pattern: "color-status-error"
    - from: "components/session-list.tsx"
      to: "app/globals.css"
      via: "CSS custom property for destructive hover state"
      pattern: "color-status-error"
---

<objective>
Make status-colored UI elements (assessment badges, error banner, delete actions) theme-adaptive, and verify all interactive elements have theme-aware hover/focus states.

Purpose: The assessment badges in confidence-check.tsx use dark-mode-optimized Tailwind colors (text-emerald-300, text-amber-300, text-rose-300) that wash out on light backgrounds. The error banner in conversation-panel.tsx uses hardcoded rose-300/400 colors. The session list delete button uses hardcoded red-400. This plan introduces semantic status color CSS variables and applies them to all affected components. It also documents that COMP-03 (Learning Journal), COMP-04 (App Header), and COMP-05 (Topic Picker) are already fully theme-ready from Phase 10's migration -- all three use only CSS custom property references with zero remaining hardcoded Tailwind color classes.

Output: All status-colored elements use theme-adaptive CSS variables. All interactive elements across the app have appropriate hover/focus states in both themes.
</objective>

<execution_context>
@/Users/yayseth/.claude/get-shit-done/workflows/execute-plan.md
@/Users/yayseth/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-theme-system/10-02-SUMMARY.md

@components/confidence-check.tsx
@components/conversation-panel.tsx
@components/session-list.tsx
@app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add status color CSS variables and update assessment badges and error banner</name>
  <files>app/globals.css, components/confidence-check.tsx, components/conversation-panel.tsx</files>
  <action>
In globals.css, add six new CSS custom properties to each [data-theme] block, placed immediately after the existing `--color-selection-bg` line:

In [data-theme="dark"]:
```
--color-status-success: #6ee7b7;
--color-status-success-bg: rgba(16, 185, 129, 0.15);
--color-status-warning: #fcd34d;
--color-status-warning-bg: rgba(245, 158, 11, 0.15);
--color-status-error: #fda4af;
--color-status-error-bg: rgba(244, 63, 94, 0.15);
```

In [data-theme="light"]:
```
--color-status-success: #047857;
--color-status-success-bg: rgba(4, 120, 87, 0.12);
--color-status-warning: #b45309;
--color-status-warning-bg: rgba(180, 83, 9, 0.12);
--color-status-error: #be123c;
--color-status-error-bg: rgba(190, 18, 60, 0.12);
```

Rationale: Dark theme uses 300-level equivalents (bright on dark bg), light theme uses 700-level equivalents (dark on light bg). Background opacity slightly lower in light theme (0.12 vs 0.15) because the lighter base makes tinted backgrounds more visible. Separate `*-bg` variables are needed because Tailwind v4 arbitrary value syntax `bg-[var(--color-status-success)]/15` does not support the opacity modifier on CSS variable references.

In confidence-check.tsx, replace the `assessmentStyles` record (currently on lines 12-16):

FROM:
```ts
const assessmentStyles: Record<string, string> = {
  tracking: "text-emerald-300 bg-emerald-500/15",
  partial: "text-amber-300 bg-amber-500/15",
  confused: "text-rose-300 bg-rose-500/15",
};
```

TO:
```ts
const assessmentStyles: Record<string, string> = {
  tracking: "text-[var(--color-status-success)] bg-[var(--color-status-success-bg)]",
  partial: "text-[var(--color-status-warning)] bg-[var(--color-status-warning-bg)]",
  confused: "text-[var(--color-status-error)] bg-[var(--color-status-error-bg)]",
};
```

In conversation-panel.tsx, replace the error banner (currently lines 148-157). Change:
- `border-rose-500/30` to `border-[color-mix(in_srgb,var(--color-status-error)_30%,transparent)]`
- `bg-rose-500/10` to `bg-[var(--color-status-error-bg)]`
- `text-rose-300` to `text-[var(--color-status-error)]`
- `text-rose-400 hover:text-rose-200` to `text-[var(--color-status-error)] hover:opacity-70`

Note: The border uses `color-mix()` because it needs a 30% opacity variant, which differs from the 12-15% background opacity already defined in the `*-bg` variable. Using `color-mix` in an arbitrary value is the cleanest approach for a one-off opacity variant.
  </action>
  <verify>
1. `grep 'emerald-300\|amber-300\|rose-300' components/confidence-check.tsx` returns zero matches
2. `grep 'rose-300\|rose-400\|rose-200\|rose-500' components/conversation-panel.tsx` returns zero matches
3. `grep 'color-status-success' app/globals.css` returns matches in both [data-theme="dark"] and [data-theme="light"] blocks
4. `grep 'color-status-warning' app/globals.css` returns matches in both theme blocks
5. `grep 'color-status-error' app/globals.css` returns matches in both theme blocks
6. `npm run build` passes
  </verify>
  <done>Assessment badges use --color-status-{success,warning,error} CSS variables. Error banner uses --color-status-error CSS variable. All six status variables are defined with exact hex/rgba values in both [data-theme] blocks.</done>
</task>

<task type="auto">
  <name>Task 2: Fix session list delete button hover state to use theme variable</name>
  <files>components/session-list.tsx</files>
  <action>
In session-list.tsx, the delete button (line 114) uses hardcoded Tailwind colors:
```
hover:bg-red-500/10 hover:text-red-400
```

Replace with theme-adaptive CSS variable references:
```
hover:bg-[var(--color-status-error-bg)] hover:text-[var(--color-status-error)]
```

This is the only remaining interactive element in the app with hardcoded Tailwind color classes for hover/focus states. All other interactive elements were verified as already theme-ready:

- Main chat textarea (conversation-panel.tsx): focus:ring uses var(--color-accent-indigo) -- DONE
- Send buttons (conversation-panel.tsx, confidence-check.tsx): hover uses var(--color-primary-bg-hover) -- DONE
- Topic chip buttons (topic-picker.tsx): hover uses var(--color-accent-indigo) variants -- DONE
- Start learning / Begin conversation buttons (topic-picker.tsx): hover uses var(--color-primary-bg-hover) -- DONE
- Watch demo button (topic-picker.tsx): hover uses var(--color-accent-indigo) variants -- DONE
- API key input (topic-picker.tsx): focus:ring uses var(--color-accent-indigo) -- DONE
- Confidence check textarea (confidence-check.tsx): focus:ring uses var(--color-accent-indigo) -- DONE
- Learning journal collapse/expand (conversation-shell.tsx, replay-shell.tsx): uses var(--color-text) and var(--color-text-dim) -- DONE
- Fullscreen toggle (concept-map.tsx): hover uses var(--color-text) and var(--color-border) -- DONE
- Close fullscreen button (concept-map.tsx): hover uses var(--color-text) and var(--color-border) -- DONE
- Export / New topic buttons (conversation-shell.tsx): hover uses var(--color-surface) and var(--color-text) -- DONE
- Theme toggle button (app-header.tsx): hover uses var(--color-text-dim) and var(--color-text) -- DONE
- Session list Load button (session-list.tsx): hover uses var(--color-accent-indigo) variants -- DONE
- Session list Export button (session-list.tsx): hover uses var(--color-border) and var(--color-text) -- DONE
- Replay controls Back/Next/Auto-play (replay-controls.tsx): hover uses var(--color-border) and var(--color-text) -- DONE
- Try it live / Exit buttons (replay-shell.tsx): hover uses theme variable patterns -- DONE
  </action>
  <verify>
1. `grep 'red-500\|red-400' components/session-list.tsx` returns zero matches
2. `grep 'color-status-error' components/session-list.tsx` returns matches
3. `npm run build` passes
  </verify>
  <done>Session list delete button uses --color-status-error theme variables for hover state. Every interactive element across the entire app now uses CSS custom property references for hover/focus states.</done>
</task>

</tasks>

<verification>
1. Assessment badges (tracking/partial/confused) use CSS variable colors that resolve differently per theme
2. Error banner uses CSS variable colors that resolve differently per theme
3. Session list delete button uses CSS variable hover state
4. All new CSS variables are defined in both [data-theme="dark"] and [data-theme="light"] blocks with exact values
5. No hardcoded Tailwind color classes remain in confidence-check.tsx, conversation-panel.tsx error banner, or session-list.tsx delete button
6. All interactive elements across the app have theme-aware hover/focus states (verified by audit above)
7. `npm run build` passes with zero errors
</verification>

<success_criteria>
- Assessment badge text is readable on both dark (#0a0a0a) and light (#f8f6f3) backgrounds
- Error banner text and dismiss button are readable in both themes
- Session list delete button hover state adapts to current theme
- Status CSS variables are defined with exact hex/rgba values in both theme palettes
- Every button, input, and interactive element across the app uses theme-variable-based hover/focus states
- Build passes
</success_criteria>

<output>
After completion, create `.planning/phases/11-component-theme-parity/11-02-SUMMARY.md`
</output>
