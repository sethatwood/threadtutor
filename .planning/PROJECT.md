# ThreadTutor

## What This Is

A Next.js app that demonstrates AI-assisted Socratic learning. Claude teaches a user about any topic by asking questions, checking understanding, and building a visual concept map in real time. Three modes (Replay, Live, Local Dev) share the same UI components -- the only difference is where data comes from and where sessions are stored. The live URL is threadtutor.com.

## Core Value

The system prompt is the product. A well-prompted Claude that teaches through Socratic questioning, with a UI built around learning rather than chatting.

## Requirements

### Validated

(None yet -- ship to validate)

### Active

- [ ] Replay mode: visitors step through a pre-recorded session with concept map building progressively
- [ ] Live mode: user enters Anthropic API key, picks a topic, Claude teaches via Socratic conversation
- [ ] Structured JSON output from Claude driving all UI (displayText, concepts, confidenceCheck, journalEntry)
- [ ] Concept map (React Flow) showing directed graph of concepts with parent-child relationships
- [ ] Conversation panel rendering teaching exchanges and confidence checks
- [ ] Learning journal panel with one-sentence summaries per assistant turn
- [ ] Confidence checks every 2-3 turns with three-level assessment (tracking/partial/confused)
- [ ] Session recording to localStorage with JSON export
- [ ] API route proxying Claude calls (CORS requirement)
- [ ] API key management via localStorage (live mode) with .env.local fallback (dev mode)
- [ ] Three-panel desktop layout (map | conversation | journal), stacked on mobile
- [ ] Replay controls (Next/Back/Auto-play)
- [ ] Past sessions list from localStorage
- [ ] Demo session: Bitcoin proof-of-work topic committed as demo.json

### Out of Scope

- User authentication -- API key entry is not auth
- Server-side database -- no backend storage of user data
- Multiple topics in one session -- one topic per session
- Storing user API keys server-side -- keys are per-request only
- Paying for other users' API calls -- BYOK model

## Context

- The premise: reading and watching are passive. Being asked good questions by someone who knows when to push and when to back up is the fastest way to learn.
- Bitcoin proof-of-work is the ideal demo topic: technical enough to showcase real teaching, accessible enough for non-technical visitors, produces a rich concept map, and connects to the author's other project (Bitcoin Echo, bitcoinecho.org).
- The demo session should be generated by running a live session as the learner, giving real answers, and intentionally exercising the "partial" and "confused" assessment paths.

## Constraints

- **Tech stack**: Next.js 14+ (App Router), TypeScript, Tailwind CSS, React Flow, Anthropic SDK (@anthropic-ai/sdk)
- **Model**: claude-sonnet-4-5-20250929 (Sonnet -- faster, cheaper, sufficient for tutoring)
- **Token limit**: max_tokens 1024 per response (tutoring turns should be concise)
- **Deployment**: Vercel free tier, auto-deploy on push
- **Style**: No em dashes anywhere in the project. Design direction: clean, minimal, educational ("Notion" not "Discord"). Muted colors, good typography, generous whitespace.
- **Security**: User API keys never logged or stored server-side. Sent per-request only.

## Key Decisions

| Decision | Rationale | Outcome |
|----------|-----------|---------|
| Sonnet over Opus | Faster, cheaper, sufficient for tutoring | -- Pending |
| JSON structured output (not plain text) | Drives all UI components from single response | -- Pending |
| BYOK (bring your own key) model | No server costs for API calls, no auth needed | -- Pending |
| React Flow with dagre layout | Automatic node positioning for concept graphs | -- Pending |
| localStorage for sessions (not server DB) | Simplicity, no backend required | -- Pending |
| API proxy route (not direct browser calls) | Anthropic API doesn't support CORS | -- Pending |
| Strip markdown code fences from responses | Claude occasionally wraps JSON in fences | -- Pending |

---
*Last updated: 2026-02-14 after initialization*
